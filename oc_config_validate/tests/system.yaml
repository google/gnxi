!TestContext

description: Test the /system OC model of a device

labels:
- system

tests:

- !TestCase
  name: "Check System Config model validity"
  class_name: get.GetJsonCheck
  args:
    xpath: "/system"
    model: system.system

- !TestCase
  name: "Set Hostname and Domain"
  class_name: set.JsonCheckSetUpdate
  args:
    xpath: "/system/config"
    model: system.config.config
    json_value: {
      "openconfig-system:domain-name": "corp.google.com",
      "openconfig-system:hostname": "foobar"
    }

- !TestCase
  name: "Compare Hostname and Domain configured"
  class_name: get.GetCompare
  args:
    xpath: "/system/config"
    want: {
      "config": {
        "domain-name": "corp.google.com",
        "hostname": "foobar"
      }
    }

- !TestCase
  name: "Check Hostname and Domain configured"
  class_name: get.GetJsonCheck
  args:
    xpath: "/system/config"
    model: system.config.config

- !TestCase
  name: "Set Hostname and Domain"
  class_name: setget.JsonCheckCompare
  args:
    xpath: "/system/config"
    model: system.config.config
    json_value: {
      "openconfig-system:domain-name": "prod.google.com",
      "openconfig-system:hostname": "lalala"
    }

- !TestCase
  name: "Compare Hostname and Domain state"
  class_name: get.GetCompare
  args:
    xpath: "/system/state"
    want: {
      "state": {
        "domain-name": "prod.google.com",
        "hostname": "lalala"
      }
    }

- !TestCase
  name: "Check Hostname and Domain state"
  class_name: get.GetJsonCheck
  args:
    xpath: "/system/state"
    model: system.state.state

- !TestCase
  name: "Set and Check Timezone"
  class_name: config_state.SetConfigCheckState
  args:
    xpath: "/system/clock"
    model: "system.clock"
    json_value: {
      "openconfig-system:timezone-name": "America/Los_Angeles"
    }
